oxenmq (1.2.18-1~deb11) bullseye; urgency=medium

  [ Jason Rhinelander ]
  * Update oxen-encoding to latest dev
  * Bump ZMQ to latest release & propagate flags to build
  * 1.2.17 release

  [ dr7ana ]
  * cpp20 bump and CI fixes
  * more CI fun!

  [ Jason Rhinelander ]
  * Update to oxen-encoding 1.2.0
  * ci: update stale deps
  * bump version
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 12 Dec 2024 19:54:35 -0400

oxenmq (1.2.17-1~deb11) bullseye; urgency=medium

  * Make epoll runtime configurable and disable by default
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 20 Feb 2024 16:42:24 -0400

oxenmq (1.2.16-1~deb11) bullseye; urgency=medium

  * 1.2.16 release

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 28 Sep 2023 11:15:02 -0300

oxenmq (1.2.16-1~deb11) bullseye; urgency=medium

  * Drop long-deprecated liblokimq-dev package
  * Redo random string generation
  * Bump version
  * Update oxen-encoding submodule
  * Add epoll support for Linux
  * epoll: fix hang on heavily loaded sockets
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 28 Sep 2023 11:10:56 -0300

oxenmq (1.2.14-1~deb11) bullseye; urgency=medium

  [ Jason Rhinelander ]
  * oxen-encoding submodule to latest tagged release
  * Remove deprecated code
  * Add sid workaround

  [ Thomas Winget ]
  * initial implementation of generic pub/sub management

  [ Jason Rhinelander ]
  * Fix a race condition with tagged thread startup
  * Fix installed headers
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Wed, 05 Oct 2022 20:32:39 -0300

oxenmq (1.2.13-2~deb11) bullseye; urgency=medium

  * Bump oxen-encoding dep

 -- Jason Rhinelander <jason@imaginary.ca>  Wed, 31 Aug 2022 13:47:53 -0300

oxenmq (1.2.13-1~deb11) bullseye; urgency=medium

  [ Jason Rhinelander ]
  * Update oxenc so that oxenc::oxenc target exists

  [ Sean Darcy ]
  * adds custom formatter for OMQ structs that have to_string member

  [ Jason Rhinelander ]
  * Fix zmq socket limit setting
  * Increase ulimit on macos
  * oxen-encoding submodule to latest tagged release
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Wed, 31 Aug 2022 12:52:36 -0300

oxenmq (1.2.12-1~deb11) bullseye; urgency=medium

  [ Jason Rhinelander ]
  * cmake work-around for cmake < 3.21
  * Use liboxenc-dev in ci jobs

  [ xutaxkamay ]
  * Fix libzmq library linking

  [ Jason Rhinelander ]
  * Fix cmake compilation properties
  * Add simpler Job subclass of Batch for simple jobs
  * Eliminate useless unordered_set
  * Change std::queue to std::deque typedef
  * Use raw index bytes in worker router
  * Use fixed array for known-small internal messages
  * Use fixed vector for idle workers
  * Add missing header
  * Avoid unnecessary nullptr assignment
  * Bump version & embedded oxenc version
  * new gbp compatibility
  * Fix use of parent oxenc::oxenc target
  * fix linkage for submodule dep use
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Mon, 30 May 2022 16:41:50 -0300

oxenmq (1.2.11-2~deb11) bullseye; urgency=medium

  * cmake work-around for cmake < 3.21
  * Set compiler flags to enable Pi zero CPU support

 -- Jason Rhinelander <jason@imaginary.ca>  Fri, 29 Apr 2022 18:10:35 -0300

oxenmq (1.2.11-1~deb11) bullseye; urgency=medium

  * Use oxen-encoding and add compatibility shim headers
  * Fix static build
  * Fix extra file in header install list
  * Add liboxenc-dev build and dev dependency

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 29 Mar 2022 23:28:49 -0300

oxenmq (1.2.10-1~deb11) bullseye; urgency=medium

  * Disable IPv6 by default

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 02 Dec 2021 19:11:43 -0400

oxenmq (1.2.9-1~deb11) bullseye; urgency=medium

  * CI tweaks
  * use prebuilt builder ci; reformat
  * Add std::hash implementation for oxenmq::address
  * Enable ipv6 support on sockets
  * Rebrand variables LMQ -> OMQ
  * Allow null logger
  * Propagate proxy thread startup exceptions
  * Bump version
  * Fix libc++

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 30 Nov 2021 14:31:46 -0400

oxenmq (1.2.8-1~deb11) bullseye; urgency=medium

  * fix lib version
  * Update ci to use our pre-built images
  * Updates for pyoxenmq 1.0.0

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 21 Oct 2021 23:01:04 -0300

oxenmq (1.2.7-1~deb11) bullseye; urgency=medium

  [ Jason Rhinelander ]
  * Tweak test timers to deal with Apple's shitty thread scheduling
  * Update bundled zeromq download version
  * Apple test suite hacks
  * Another apple time fix attempt
  * Add support for inproc: requests
  * Downgrade "worker waiting for" log message to trace
  * Remove debugging
  * Fix backwards logic on overlapping ranges comment
  * Make {to,from}_{hex/b64/b32} return output iterator
  * Remove ancient dead code
  * Add allocation-free bt-list and bt-dict producer
  * Apple workaround
  * Another workaround for crapple
  * Add const

  [ Jeff Becker ]
  * add operator() overload for defered message that sends reply

  [ Jason Rhinelander ]
  * Expose size calculations; stricter b32z/b64 validity checking
  * Make (and use) iterator approach for encoding/decoding
  * Add b32z/b64 invalid garbage tests
  * Add methods for unpadded base64 construction
  * Simplify iterator initialization & avoid warnings
  * Fix r narrowing initialization warning when uint_fast16_t is small
  * drone: quiet/optimize image setup
  * Allow disabling -Werror via a cmake option
  * Update catch2 to latest 2.x upstream
  * Crank clang to 13
  * Maybe fix macos tests?
  * Fix versioning in clang/llvm pipeline functions
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Sat, 16 Oct 2021 11:38:00 -0300

oxenmq (1.2.6-2~deb11) bullseye; urgency=medium

  * fix control file
  * Loki->Oxen in package descriptions

 -- Jason Rhinelander <jason@imaginary.ca>  Mon, 09 Aug 2021 13:18:58 -0300

oxenmq (1.2.6-1~deb11) bullseye; urgency=medium

  * Update gbp main branch name to stable
  * Add timer cancellation & timer tests
  * Bump project version in dev branch (for next release)
  * Add thread-safe timerid assignment version of add_timer()
  * Minor doc fix
  * Add `is_unsigned_integer` to bt_{dict,list}_consumer
  * Loki->Oxen rebrand the README
  * Add support for listening after startup
  * Miscellaneous small test suite fixes/improvements
  * Fix uninitialized value in post-start listen test
  * Simplify conn index handling (#41)
  * Fix messages coming back on an outgoing connection
  * Add a single container version of `send_option::data_parts`
  * Remove debug

 -- Jason Rhinelander <jason@imaginary.ca>  Mon, 05 Jul 2021 18:11:04 -0300

oxenmq (1.2.5-1~deb11) bullseye; urgency=medium

  * Bullseye deb

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 22 Apr 2021 13:35:02 -0300

oxenmq (1.2.5-0) unstable; urgency=medium

  * Add connect_option::*; allow per-connection pubkey-based routing setting
  * Bump (and cmake-modernize) version
  * Rename PUBKEY_BASED_ROUTING_ID to EPHEMERAL_ROUTING_ID
  * Don't warn when we can't send back to an non-SN incoming connection
  * Add support for std::optional<T> send arguments

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 22 Apr 2021 01:48:49 -0300

oxenmq (1.2.4-1) unstable; urgency=medium

  * Add missing header
  * Fix debian/rules cmake variables
  * Add better deferred reply capabilities to Message
  * Make is_bt_tuple constexpr variables inline
  * Bump version
  * Rediff patches

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 09 Mar 2021 15:52:00 -0400

oxenmq (1.2.3-2) unstable; urgency=medium

  * Add missing header

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 14 Jan 2021 23:29:12 -0400

oxenmq (1.2.3-1) unstable; urgency=medium

  * Refresh .so versioning patch
  * fix lib version
  * Make lokimq::is_hex check for size being a multiple of 2
  * Fix decoding into a std::byte
  * Rename LokiMQ to OxenMQ
  * Add lokimq compatibility headers
  * Export compile commands and use ccache by default
  * Remove deprecated string_view compat shim
  * Rediff patches
  * Rename package in control file

 -- Jason Rhinelander <jason@imaginary.ca>  Thu, 14 Jan 2021 15:49:08 -0400

lokimq (1.2.2-1) unstable; urgency=medium

  * Crank clang to 11
  * cppzmq 4.7+ compatibility
  * Move socket holding into LokiMQ instance
  * Don't install when building as a static subdirectory
  * Bump version for 1.2.2 release

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 17 Nov 2020 15:29:41 -0400

lokimq (1.2.1-1) unstable; urgency=medium

  * Update macos build to use 10.14 compatibility
  * macOS 10.12 compatibility
  * Test suite: use different ports for each test
  * Fix var::get<I> to return references
  * Stable release bump

 -- Jason Rhinelander <jason@imaginary.ca>  Wed, 21 Oct 2020 00:18:32 -0300

lokimq (1.2.0-1) unstable; urgency=medium

  * 1.2.0 release.

 -- Jason Rhinelander <jason@imaginary.ca>  Wed, 30 Sep 2020 17:15:13 -0300

lokimq (1.2.0~pre2-1) unstable; urgency=medium

  [ Jason Rhinelander ]
  * Add support for setting umask when binding
  * Add base32z encoder/decoder
  * Add base64 encoder/decoder
  * Add address parsing/generating class
  * Require C++17
  * Silence c++17 warnings from cppzmq
  * Remove pre-C++17 workarounds/ifdefs
  * C++17 class template deduction
  * Add missing initialization of curr
  * Make from_{hex,base32z,base64} compatible with std::byte

  [ Stephen Shelton ]
  * Wrap code section in README.md

  [ Jason Rhinelander ]
  * Add it pair versions of {to,from}_{hex,base32z,base64}
  * C++17 changes; replace mapbox with std::variant
  * Add missing files
  * Fix test segfault under clang
  * Add missing <string> headers for libc++
  * Fix sodium linking and call sodium_init()
  * Link to sodium publicly
  * Move -isystem hack inside if-found
  * Add drone ci builds
  * Add Debug ci build, set other builds to Release
  * Let color through Ninja (1.9+)
  * Move address << operator implementation out of header
  * Tweak test timeout
  * Add macOS build
  * README: C++14 -> C++17
  * Remove unused variable
  * Tagged threads for jobs, batches, and timers
  * Made `log()` callable publicly
  * Rename TaggedThread to TaggedThreadID, drop .name attribute
  * Drop tagged thread init function; add synchronization dance
  * Fix grammar
  * Resolve race condition in test suite
  * Pass compiler through ExternalProject_Add
  * Remove debugging
  * Add "C" to languages
  * include fixes from iwyu
  * Add missing header
  * More header fixes
  * Take lokimq::address as connect_remote argument
  * Allow injecting tasks into lokimq job queue
  * Doc fix - remove "init" and update "start" doc
  * Add missing header for BSD pthread naming
  * Fix tagged workers not being properly shut down
  * Add test that destruction doesn't throw
  * Wait for tagged workers
  * Fix & add tests for send_option::data_parts(...)
  * Replace visitor class with generic lambda
  * Add serialization/deserialization of tuples and pairs
  * Drop const from _id
  * Add missing headers to installed header list
  * inline constexpr lokimq constants
  * Add C string bt_value ctor

  [ Jeff Becker ]
  * allow an IPC socket to set which group it is owned by using SOCKET_GID similar to how STARTUP_UMASK is done.
  * allow changing uid as root

  [ Jason Rhinelander ]
  * Update bundled libzmq version
  * Make drone build debs
  * Add repo & no recommends
  * Remove mapbox variant dep
  * Parallelize
  * single apt-get update; include gpg pubkey
  * fix typo
  * de-https
  * Allow binary
  * Remove old cmake flag
  * DRY
  * Add separate submodules step
  * drop mapbox-variant
  * Don't build tests

  [ Thomas Winget ]
  * add method to get current buffer from bt list/dict consumer

 -- Jason Rhinelander <jason@imaginary.ca>  Fri, 25 Sep 2020 21:08:51 -0300

lokimq (1.2.0~pre1-1) unstable; urgency=medium

  * lokimq 1.2.0 dev snapshot

 -- Jason Rhinelander <jason@imaginary.ca>  Mon, 21 Sep 2020 20:58:30 -0300

lokimq (1.1.4-1) unstable; urgency=medium

  * Silence spurious warning on optional send failure
  * Add bt_u64 wrapper for forcing a uint64_t on the wire
  * Add checking for a negative int in bt_*_consumer
  * 1.1.4

 -- Jason Rhinelander <jason@imaginary.ca>  Mon, 21 Sep 2020 20:57:48 -0300

lokimq (1.1.3-1) unstable; urgency=medium

  * Bump version (not released yet)
  * Provide caller Access in Message
  * Fix ""_sv literal being non-constexpr
  * Add remote address into Message object
  * Fix incoming ConnectionIDs not being storable
  * Add hack to fix compilation on debian sid

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 28 Apr 2020 22:54:01 -0300

lokimq (1.1.2-1) unstable; urgency=medium

  * Set thread names on proxy/workers
  * Fix proxy thread stall when workers fill up
  * Change worker thread names: "w2" -> "lmq-w2"
  * Bump version to 1.1.2

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 21 Apr 2020 17:15:26 -0300

lokimq (1.1.1-1) unstable; urgency=medium

  * Drop idle connections regularly
  * Reduce heartbeat frequency to 15s

 -- Jason Rhinelander <jason@imaginary.ca>  Sat, 18 Apr 2020 03:00:49 -0300

lokimq (1.1.1~pre-1) unstable; urgency=medium

  * removed UNKNOWNCOMMAND patch (applied upstream)
  * Fix storing reference to temporary
  * Fix broken idle expiry timeout
  * Use slower and exponential backoff in reconnection
  * Increase ZMQ socket limit
  * Bump version to 1.1.1

 -- Jason Rhinelander <jason@imaginary.ca>  Fri, 17 Apr 2020 16:22:33 -0300

lokimq (1.1.0-2) unstable; urgency=medium

  * Fix pre-1.1.0 UNKNOWNCOMMAND detection

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 14 Apr 2020 23:58:00 -0300

lokimq (1.1.0-1) unstable; urgency=medium

  * Rediff patches
  * Test suite timing tweaks
  * Add ZMTP heartbeating (enabled by default)
  * 1.1.0: invocation-time SN auth; failure responses
  * Move pubkey_set into auth.h header
  * Add missing SET_SNS proxy handler

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 14 Apr 2020 13:06:33 -0300

lokimq (1.0.5-1) unstable; urgency=medium

  * Change thread count logs to debug from trace
  * Reset stale pollitems
  * Add `send_option::outgoing` to force a send on an outgoing connection
  * Expose advanced zmq context setting ability
  * Made simple_string_view take a char type
  * Fix pollitems_stale not being set in some cases
  * Bump version to 1.0.5

 -- Jason Rhinelander <jason@imaginary.ca>  Mon, 06 Apr 2020 18:19:22 -0300

lokimq (1.0.4-1) unstable; urgency=medium

  * Catch errors on internal msgs; support non-blocking sends
  * Remove empty file
  * Catch connect failures
  * All sends use dontwait; add send failure callbacks
  * Less verbose logging at `info` level
  * Allow log level to be specified in constructor
  * Bump version to 1.0.4
  * Add job queue check on total workers size

 -- Jason Rhinelander <jason@imaginary.ca>  Sun, 29 Mar 2020 15:52:20 -0300

lokimq (1.0.3-2) unstable; urgency=medium

  * Version liblokimq
  * Fully version library
  * liblokimq package versioning

 -- Jason Rhinelander <jason@imaginary.ca>  Sat, 28 Mar 2020 12:30:32 -0300

lokimq (1.0.3-1) unstable; urgency=medium

  * Avoid masking ReplyCallback type with template param
  * Avoid segfault on retried SN connection request
  * Trim logged filenames to lokimq/*
  * 1.0.3 release

 -- Jason Rhinelander <jason@imaginary.ca>  Fri, 27 Mar 2020 18:56:42 -0300

lokimq (1.0.2-2) unstable; urgency=medium

  * liblokimq-dev needs to be arch: any

 -- Jason Rhinelander <jason@imaginary.ca>  Wed, 25 Mar 2020 16:21:10 -0300

lokimq (1.0.2-1) unstable; urgency=medium

  * Rename keep-alive -> keep_alive in internal serialization
  * Reduce connection check interval and make configurable
  * Make request timeout configurable
  * 1.0.2 version bump

 -- Jason Rhinelander <jason@imaginary.ca>  Tue, 24 Mar 2020 11:37:17 -0300

lokimq (1.0.1-2) unstable; urgency=medium

  * slower connection tests

 -- Jason Rhinelander <jason@imaginary.ca>  Mon, 23 Mar 2020 15:18:10 -0300

lokimq (1.0.1-1) unstable; urgency=medium

  * Use the correct variable for shared libs
  * More static build linking fixes
  * cmake compatibility fix
  * Add sodium dep if embedding static lib when doing a shared build, too
  * More linking overhaul
  * Add BUILD_BYPRODUCTS so that ninja build works
  * Increase test timeouts for arm
  * Add more locks around assertions
  * Change pending_connects from vector to list
  * 1.0.1 release

 -- Jason Rhinelander <jason@imaginary.ca>  Sat, 21 Mar 2020 13:00:06 -0300

lokimq (1.0.0-1) unstable; urgency=medium

  * Initial LokiMQ release

 -- Jason Rhinelander <jason@imaginary.ca>  Fri, 13 Mar 2020 17:51:00 -0300
